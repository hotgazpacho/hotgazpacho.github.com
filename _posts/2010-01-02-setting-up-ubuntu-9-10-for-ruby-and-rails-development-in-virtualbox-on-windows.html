--- 
layout: post
title: Setting up Ubuntu 9.10 for Ruby and Rails Development in VirtualBox on Windows
wordpress_id: 85
wordpress_url: http://hotgazpacho.org/2010/01/setting-up-ubuntu-9-10-for-ruby-and-rails-development-in-virtualbox-on-windows/
date: 2010-01-02 23:37:56 -05:00
---
<blockquote cite="http://twitter.com/hotgazpacho/status/7283089460">   <p>I now believe that if you're serious about creating Rails apps, you aren't doing it on Windows. Or, you are a masochist.</p> </blockquote>  <p>That’s a quote from me. I’m done trying to do serious Ruby &amp; Rails development on Windows. As of January 1st, 2010, I have not found a Ruby implementation on Windows that is fast enough to support the TDD/BDD workflow that <a href="http://www.coreyhaines.com/">Corey Haines</a> exhibits in his <a href="http://katas.softwarecraftsmanship.org/?p=12">Number to LCD code kata</a>. On top of that, I wasted 2 days on trying to get <a href="http://seleniumhq.org/">Selenium</a> and <a href="http://cukes.info">Cucumber</a> to work together in Windows. I was venting about this on Twitter when <a href="http://www.coryfoy.com/">Cory Foy</a> made a suggestion:</p>  <blockquote cite="http://twitter.com/cory_foy/status/7270114092">   <p>@<a href="http://twitter.com/hotgazpacho">hotgazpacho</a> You know, I don't know why you don't just run a VM with Linux on it for Rails dev. That's what I have on my Windows box.</p> </blockquote>  <p>I didn’t know why either. My first concern was memory consumption (my personal notebook only has 2 GB of RAM in it), but both Cory and <a href="http://blog.adsdevshop.com/">Robert Dempsey</a> allayed my fears:</p>  <blockquote cite="http://twitter.com/cory_foy/status/7272468693">   <p>@<a href="http://twitter.com/hotgazpacho">hotgazpacho</a> 2GB should be plenty. The Linux VM should only need 512. Would help to run the VM on an external drive if you've got one</p> </blockquote>  <blockquote cite="http://twitter.com/rdempsey/status/7272539736">   <p>@<a href="http://twitter.com/cory_foy">cory_foy</a> @<a href="http://twitter.com/hotgazpacho">hotgazpacho</a> I run linux ubuntu vm's (vmware) on my MBP and 512 is more than enough if you don't use a heavy IDE. Runs very well</p> </blockquote>  <p>So, I went ahead and set up <a href="http://www.ubuntu.com/">Ubuntu</a> 9.10 in a <a href="http://www.virtualbox.org/">VirtualBox</a> virtual machine (VirtualBox is a free virtualization product from Sun, similar to VMWare Workstation or Microsoft Virtual PC). The results were astounding! On a Rails app I was working on, all the RSpec examples and Cucumber features ran in less than the time it took for the MingW Ruby interpreter to start up. WOW! We’re talking orders of magnitude faster, and all in less memory than it takes to boot Windows. I’m sold.</p>  <h3>Here’s how I set up the VM:</h3>  <ol>   <li>Install VirtualBox </li>    <li>Create a new VB VM for Ubuntu      <br />The <a href="https://help.ubuntu.com/community/VirtualBox/FirstVM">Ubuntu Community wiki</a> has pretty good documentation (for Ubuntu host, but UI is pretty much identical on Windows) </li>    <li>Make sure the system is up-to-date <em>(it won't be)</em>. Let update manager run &amp; reboot </li>    <li>Install Virtual Box additions &amp; reboot </li>    <li>Install pre-requirements for building stuff <em>(note: I may be missing some stuff. If I am, Ruby Enterprise Edition installer will let you know and tell you what is missing)</em>:       <br />      <br /><code lang="bash">sudo apt-get install build-essential libpcre3 libxml2-dev libxslt1-dev sqlite3 libsqlite3-dev –y</code> </li>    <li><a href="http://www.rubyenterpriseedition.com/download.html">Ruby Enterprise Edition</a> <em>(cause this is what I run on my production server)</em>       <br />      <br /><code lang="bash" escaped="true">wget -c http://rubyforge.org/frs/download.php/66162/ruby-enterprise-1.8.7-2009.10.tar.gz        <br />tar xzvf ruby-enterprise-1.8.7-2009.10.tar.gz         <br />sudo ./ruby-enterprise-1.8.7-2009.10/installer</code>       <br /></li>    <li>Add Ruby Enterprise Edition bin path to &quot;secure path&quot; for sudo      <br />      <br /><code lang="bash">sudo visudo</code>       <br />Change line starting with Defaults to the following:       <br /><code escaped="true">Defaults env_reset, secure_path=/opt/ruby-enterprise-1.8.7-2009.10/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</code> </li>    <li>Install <a href="http://github.com/lexrupy/gmate">gmate</a>, which makes gEdit behave like TextMate. Instructions are on the gmate github page.       <br /></li>    <li>Make gem <em>not</em> install rdoc and ri by default.       <br />      <br /><code lang="bash" escaped="true">echo &quot;gem: --no-rdoc --no-ri&quot; &gt;&gt; ~/.gemrc</code> </li>    <li>Install Rails, Sqlite, ZenTest, RSpec, Cucumber, &amp; Factory Girl      <br />      <br /><code lang="bash" escaped="true">sudo gem i rails sqlite3-ruby ZenTest rspec cucumber factory_girl</code> </li>    <li>Make cucumber feature running part of autospec runs      <br />      <br /><code lang="bash" escaped="true">echo &quot;export AUTOFEATURE=true&quot; &gt;&gt; ~/.profile</code> </li> </ol>  <h3>One Minor Problem…</h3>  <p>There’s only one minor problem with this whole setup. Cory Foy articulated it best:</p>  <blockquote cite="http://twitter.com/cory_foy/status/7279949479">   <p>@<a href="http://twitter.com/hotgazpacho">hotgazpacho</a> The problem is now you'll /really/ not be happy doing Rails on Windows. Ever. :)</p> </blockquote>  <p>This is a problem I can live with :)</p>  <h3>For some additional fun…</h3>  <p>…you might want to install the following:</p>  <ol>   <li><a href="http://github.com/lvv/git-prompt">git-prompt</a>, bash prompt with GIT, SVN and HG modules       <br />      <br /><code lang="bash" escaped="true">git clone git://github.com/lvv/git-prompt.git &amp;&amp; echo &quot;. ~/git-prompt/git-prompt.sh&quot; &gt;&gt; ~/.profile</code> </li>    <li>Autotest/Autospec notifications to Ubuntu system notifications <em>(similar to Growl on OS X)</em>       <br />      <br /><code lang="bash" escaped="true">sudo gem i test_notifier &amp;&amp; echo &quot;require 'test_notifier/autotest'&quot; &gt;&gt; ~/.autotest</code> </li>    <li>Sounds for Autotest events - <a href="http://www.fozworks.com/2007/7/28/autotest-sound-effects">http://www.fozworks.com/2007/7/28/autotest-sound-effects</a>       <br />      <br /><code lang="bash" escaped="true">sudo apt-get install mpg321 &amp;&amp; wget -c http://www.fozworks.com/static/autotest-sound-1_2.zip &amp;&amp; gunzip autotest-sound-1_2.zip &amp;&amp; echo &quot;require '~/autotest/sound/sound.rb'&quot; &gt;&gt; ~/.autotest &amp;&amp; echo &quot;Autotest::Sound.sound_path = '~/autotest/sound/sound_fx/'&quot; &gt;&gt; ~/.autotest</code> </li> </ol>
